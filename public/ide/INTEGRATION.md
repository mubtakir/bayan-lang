# 🔗 الربط بين المحررات - Integration Between Editors

## 🎯 نظرة عامة - Overview

الآن يمكنك **التنقل بسهولة** بين المحررات الثلاثة مع **نقل الكود تلقائياً**!

---

## 🔄 مسارات التنقل - Navigation Paths

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  🎨 IDE المرئي          🔄          🎯 المحرر النهائي      │
│  Visual IDE            ←→           Bayan Runner           │
│                                                             │
│  • سحب وإفلات                      • تشغيل مباشر           │
│  • توليد كود                       • ترجمة للـ JS          │
│  • 8 أنواع كتل                     • 5 أمثلة جاهزة        │
│                                                             │
│  زر: "المحرر النهائي" 🚀           زر: "IDE المرئي" 🎨     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎨 من IDE المرئي إلى المحرر النهائي

### الطريقة 1: زر في الأعلى (مباشر)

**الموقع:** في شريط الأدوات العلوي

**الزر:**
```
┌──────────────────────────┐
│ 🚀 المحرر النهائي       │
│    Final Editor          │
└──────────────────────────┘
```

**الوظيفة:**
- ✅ ينتقل مباشرة إلى المحرر النهائي
- ❌ لا ينقل الكود (انتقال سريع فقط)

**متى تستخدمه:**
- عندما تريد الانتقال السريع
- عندما لا تحتاج نقل الكود

---

### الطريقة 2: زر في نافذة الكود (مع نقل الكود) ⭐

**الخطوات:**

1. **اسحب الكتل** في IDE المرئي
   ```
   مثال: اسحب كتلة "اطبع" وغيّر النص إلى "مرحباً"
   ```

2. **انقر "توليد الكود"**
   ```
   ستظهر نافذة منبثقة بالكود المولد
   ```

3. **انقر "فتح في المحرر النهائي"**
   ```
   ┌────────────────────────────────────┐
   │ 🚀 فتح في المحرر النهائي         │
   │    Open in Runner                  │
   └────────────────────────────────────┘
   ```

4. **سيفتح المحرر النهائي في نافذة جديدة**
   ```
   ✅ الكود موجود في المحرر!
   ✅ جاهز للتشغيل!
   ```

**الوظيفة:**
- ✅ ينقل الكود تلقائياً
- ✅ يفتح في نافذة جديدة
- ✅ الكود جاهز للتشغيل

**متى تستخدمه:**
- عندما تريد تشغيل الكود المولد
- عندما تريد رؤية النتائج
- عندما تريد تعديل الكود وتشغيله

---

## 🎯 من المحرر النهائي إلى IDE المرئي

### الزر في الأسفل

**الموقع:** في شريط الأدوات السفلي

**الزر:**
```
┌──────────────────────────┐
│ 🎨 IDE المرئي           │
│    Visual IDE            │
└──────────────────────────┘
```

**الوظيفة:**
- ✅ ينتقل إلى IDE المرئي
- ⚠️ الكود النصي لا يتحول لكتل (IDE المرئي يعمل بالكتل فقط)
- ℹ️ يحفظ الكود للرجوع إليه

**متى تستخدمه:**
- عندما تريد إنشاء كود جديد بالكتل
- عندما تريد استخدام السحب والإفلات

---

## 💾 كيف يعمل نقل الكود؟ - How Code Transfer Works

### التقنية المستخدمة: `localStorage`

```javascript
// في IDE المرئي - عند النقر "فتح في المحرر النهائي"
function openInRunner() {
    // حفظ الكود في localStorage
    localStorage.setItem('bayanCode', window.generatedCode);
    
    // فتح المحرر النهائي
    window.open('bayan-runner.html', '_blank');
}

// في المحرر النهائي - عند التحميل
document.addEventListener('DOMContentLoaded', () => {
    // قراءة الكود من localStorage
    const savedCode = localStorage.getItem('bayanCode');
    
    if (savedCode) {
        // تحميل الكود في المحرر
        document.getElementById('code-editor').value = savedCode;
        
        // مسح localStorage
        localStorage.removeItem('bayanCode');
    }
});
```

**الفوائد:**
- ✅ نقل سريع وآمن
- ✅ لا يحتاج خادم
- ✅ يعمل محلياً
- ✅ تلقائي بالكامل

---

## 🎬 سيناريوهات الاستخدام - Use Cases

### السيناريو 1: المبتدئ يتعلم البرمجة 👶

1. **ابدأ في IDE المرئي**
   - اسحب كتلة "اطبع"
   - غيّر النص إلى "مرحباً بالعالم!"

2. **ولّد الكود**
   - انقر "توليد الكود"
   - شاهد الكود المولد

3. **افتح في المحرر النهائي**
   - انقر "فتح في المحرر النهائي"
   - شغّل الكود وشاهد النتيجة!

**النتيجة:** ✅ تعلم البرمجة بصرياً ثم شاهد الكود الحقيقي!

---

### السيناريو 2: المطور يختبر فكرة سريعة 💡

1. **ابدأ في IDE المرئي**
   - اسحب كتل "متغير" و"حلقة" و"اطبع"
   - رتبها بسرعة

2. **ولّد الكود**
   - انقر "توليد الكود"

3. **افتح في المحرر النهائي**
   - انقر "فتح في المحرر النهائي"
   - عدّل الكود حسب الحاجة
   - شغّل واختبر!

**النتيجة:** ✅ نموذج أولي سريع!

---

### السيناريو 3: تعليم الطلاب 👨‍🏫

**المعلم:**
1. ينشئ مثال في IDE المرئي
2. يولّد الكود
3. يفتح في المحرر النهائي
4. يشرح الكود للطلاب
5. يشغّل الكود ويشرح النتائج

**الطلاب:**
1. يجربون في IDE المرئي
2. يولدون الكود
3. يفتحون في المحرر النهائي
4. يشغلون ويتعلمون!

**النتيجة:** ✅ تعليم تفاعلي فعّال!

---

## 🔧 الأزرار المتاحة - Available Buttons

### في IDE المرئي (visual-ide.html)

| الزر | الموقع | الوظيفة | نقل الكود |
|------|--------|---------|-----------|
| 🚀 **المحرر النهائي** | شريط الأدوات العلوي | انتقال مباشر | ❌ لا |
| 🚀 **فتح في المحرر النهائي** | نافذة الكود المنبثقة | انتقال + نقل كود | ✅ نعم |

---

### في المحرر النهائي (bayan-runner.html)

| الزر | الموقع | الوظيفة | نقل الكود |
|------|--------|---------|-----------|
| 🎨 **IDE المرئي** | شريط الأدوات السفلي | انتقال مباشر | ⚠️ حفظ فقط |

---

## 📊 مقارنة الطرق - Comparison

| الميزة | زر الأعلى (IDE المرئي) | زر النافذة المنبثقة | زر المحرر النهائي |
|--------|------------------------|---------------------|-------------------|
| **السرعة** | ⚡ سريع جداً | ⚡ سريع | ⚡ سريع جداً |
| **نقل الكود** | ❌ لا | ✅ نعم | ⚠️ حفظ فقط |
| **نافذة جديدة** | ❌ لا | ✅ نعم | ❌ لا |
| **الاستخدام** | انتقال سريع | تشغيل الكود | إنشاء كود جديد |

---

## 🎯 التوصيات - Recommendations

### للمبتدئين 👶
```
IDE المرئي → توليد الكود → فتح في المحرر النهائي → تشغيل
```

### للمطورين 💻
```
IDE المرئي (نموذج أولي) → المحرر النهائي (تعديل وتشغيل)
```

### للمعلمين 👨‍🏫
```
IDE المرئي (شرح مرئي) → المحرر النهائي (شرح الكود) → تشغيل (شرح النتائج)
```

---

## 🐛 استكشاف الأخطاء - Troubleshooting

### المشكلة: الكود لم ينتقل

**الحل:**
1. تأكد من أنك نقرت "توليد الكود" أولاً
2. تأكد من أنك نقرت "فتح في المحرر النهائي" من النافذة المنبثقة
3. تأكد من أن المتصفح يدعم localStorage

---

### المشكلة: النافذة الجديدة لم تفتح

**الحل:**
1. تأكد من أن المتصفح لا يحجب النوافذ المنبثقة
2. اسمح للموقع بفتح نوافذ جديدة
3. جرّب متصفح آخر

---

### المشكلة: الكود اختفى بعد الانتقال

**الحل:**
1. الكود يُحذف من localStorage بعد التحميل (تصميم متعمد)
2. استخدم زر "حفظ" لحفظ الكود كملف
3. انسخ الكود قبل الانتقال

---

## 📚 الملفات المعنية - Related Files

### الملفات المعدلة:
1. `public/ide/visual-ide.js` - إضافة دالة `openInRunner()`
2. `public/ide/visual-ide.html` - إضافة زر "فتح في المحرر النهائي"
3. `public/ide/bayan-runner.js` - إضافة دالة `openInVisualIDE()` وقراءة localStorage
4. `public/ide/bayan-runner.html` - تحديث زر "IDE المرئي"

### الملفات الجديدة:
1. `public/ide/INTEGRATION.md` - هذا الملف (التوثيق)

---

<div align="center">

# 🎉 الآن المحررات متصلة بالكامل! 🎉

## 🔄 **التنقل السلس بين المحررات**

### **جرّب الآن:**

1. ✅ افتح **IDE المرئي**
2. ✅ اسحب كتلة "اطبع"
3. ✅ انقر **"توليد الكود"**
4. ✅ انقر **"فتح في المحرر النهائي"**
5. ✅ شاهد الكود في المحرر النهائي!
6. ✅ انقر **"تشغيل"** وشاهد النتيجة!

---

**الآن لديك:**
- 🔗 **ربط كامل** بين المحررات
- 💾 **نقل تلقائي** للكود
- 🚀 **تجربة سلسة** للمستخدم
- 🎯 **3 طرق** للتنقل

**كل شيء متصل!** 🎊

</div>

