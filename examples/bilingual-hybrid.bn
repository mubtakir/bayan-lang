// Bilingual Hybrid Programming Example
// Ù…Ø«Ø§Ù„ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù‡Ø¬ÙŠÙ†Ø© Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ©
// Demonstrates the unique power of Bayan: mixing OOP, Logic, and Procedural in both languages!

hybrid {
    // === OOP Section - Ù‚Ø³Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ© ===
    
    // English class
    class Student {
        constructor(name, id) {
            this.name = name;
            this.id = id;
            this.courses = [];
        }
        
        enroll(course) {
            this.courses.push(course);
            // Add logic fact when enrolling
            fact enrolled(this.id, course);
        }
    }
    
    // Arabic class - ØµÙ†Ù Ø¹Ø±Ø¨ÙŠ
    ØµÙ†Ù Ù…Ø§Ø¯Ø© {
        Ù…Ù†Ø´Ø¦(Ø§Ù„Ø§Ø³Ù…, Ø§Ù„ÙƒÙˆØ¯, Ø§Ù„Ø³Ø§Ø¹Ø§Øª) {
            Ù‡Ø°Ø§.Ø§Ù„Ø§Ø³Ù… = Ø§Ù„Ø§Ø³Ù…;
            Ù‡Ø°Ø§.Ø§Ù„ÙƒÙˆØ¯ = Ø§Ù„ÙƒÙˆØ¯;
            Ù‡Ø°Ø§.Ø§Ù„Ø³Ø§Ø¹Ø§Øª = Ø§Ù„Ø³Ø§Ø¹Ø§Øª;
        }
    }
    
    // === Logic Section - Ù‚Ø³Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© ===
    
    // English facts
    fact course("CS101", "Programming 1", 3);
    fact course("CS102", "Programming 2", 3);
    fact course("CS201", "Data Structures", 3);
    
    // Arabic facts - Ø­Ù‚Ø§Ø¦Ù‚ Ø¹Ø±Ø¨ÙŠØ©
    Ø­Ù‚ÙŠÙ‚Ø© Ù…Ø§Ø¯Ø©("CS101", "Ø¨Ø±Ù…Ø¬Ø©1", 3);
    Ø­Ù‚ÙŠÙ‚Ø© Ù…Ø§Ø¯Ø©("CS102", "Ø¨Ø±Ù…Ø¬Ø©2", 3);
    Ø­Ù‚ÙŠÙ‚Ø© Ù…Ø§Ø¯Ø©("CS201", "Ù‡ÙŠØ§ÙƒÙ„_Ø¨ÙŠØ§Ù†Ø§Øª", 3);
    
    // Prerequisites - Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
    fact prerequisite("CS102", "CS101");
    fact prerequisite("CS201", "CS102");
    Ø­Ù‚ÙŠÙ‚Ø© Ù…ØªØ·Ù„Ø¨("CS102", "CS101");
    Ø­Ù‚ÙŠÙ‚Ø© Ù…ØªØ·Ù„Ø¨("CS201", "CS102");
    
    // English rules
    rule canEnroll(?student, ?course) :-
        course(?course, ?name, ?credits),
        prerequisite(?course, ?prereq),
        enrolled(?student, ?prereq);
    
    // Can enroll if no prerequisites
    rule canEnroll(?student, ?course) :-
        course(?course, ?name, ?credits),
        not prerequisite(?course, ?any);
    
    // Arabic rules - Ù‚ÙˆØ§Ø¹Ø¯ Ø¹Ø±Ø¨ÙŠØ©
    Ù‚Ø§Ø¹Ø¯Ø© ÙŠÙ…ÙƒÙ†_Ø§Ù„ØªØ³Ø¬ÙŠÙ„(?Ø·Ø§Ù„Ø¨, ?Ù…Ø§Ø¯Ø©) :-
        Ù…Ø§Ø¯Ø©(?Ù…Ø§Ø¯Ø©, ?Ø§Ø³Ù…, ?Ø³Ø§Ø¹Ø§Øª),
        Ù…ØªØ·Ù„Ø¨(?Ù…Ø§Ø¯Ø©, ?Ù…ØªØ·Ù„Ø¨_Ø³Ø§Ø¨Ù‚),
        enrolled(?Ø·Ø§Ù„Ø¨, ?Ù…ØªØ·Ù„Ø¨_Ø³Ø§Ø¨Ù‚);
    
    Ù‚Ø§Ø¹Ø¯Ø© ÙŠÙ…ÙƒÙ†_Ø§Ù„ØªØ³Ø¬ÙŠÙ„(?Ø·Ø§Ù„Ø¨, ?Ù…Ø§Ø¯Ø©) :-
        Ù…Ø§Ø¯Ø©(?Ù…Ø§Ø¯Ø©, ?Ø§Ø³Ù…, ?Ø³Ø§Ø¹Ø§Øª),
        not Ù…ØªØ·Ù„Ø¨(?Ù…Ø§Ø¯Ø©, ?Ø£ÙŠ);
    
    // === Procedural Section - Ù‚Ø³Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠØ© ===
    
    // English function
    function registerStudent(student, courseCode) {
        console.log(`Attempting to register ${student.name} in ${courseCode}...`);
        
        const result = query canEnroll(student.id, courseCode);
        
        if (result.length > 0) {
            student.enroll(courseCode);
            console.log(`âœ… Successfully registered!`);
            return true;
        } else {
            console.log(`âŒ Cannot register - prerequisites not met`);
            return false;
        }
    }
    
    // Arabic function - Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¨ÙŠØ©
    Ø¯Ø§Ù„Ø© Ø³Ø¬Ù„_Ø·Ø§Ù„Ø¨(Ø·Ø§Ù„Ø¨, ÙƒÙˆØ¯_Ø§Ù„Ù…Ø§Ø¯Ø©) {
        console.log(`Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ ${Ø·Ø§Ù„Ø¨.name} ÙÙŠ ${ÙƒÙˆØ¯_Ø§Ù„Ù…Ø§Ø¯Ø©}...`);
        
        const Ù†ØªÙŠØ¬Ø© = query ÙŠÙ…ÙƒÙ†_Ø§Ù„ØªØ³Ø¬ÙŠÙ„(Ø·Ø§Ù„Ø¨.id, ÙƒÙˆØ¯_Ø§Ù„Ù…Ø§Ø¯Ø©);
        
        Ø¥Ø°Ø§ (Ù†ØªÙŠØ¬Ø©.length > 0) {
            Ø·Ø§Ù„Ø¨.enroll(ÙƒÙˆØ¯_Ø§Ù„Ù…Ø§Ø¯Ø©);
            console.log(`âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!`);
            Ø§Ø±Ø¬Ø¹ ØµØ­ÙŠØ­;
        } ÙˆØ¥Ù„Ø§ {
            console.log(`âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ - Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©`);
            Ø§Ø±Ø¬Ø¹ Ø®Ø·Ø£;
        }
    }
    
    // === Usage - Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ===
    
    console.log("=== English Student ===");
    const john = new Student("John Doe", "S001");
    
    // Try to register for CS101 (no prerequisites)
    registerStudent(john, "CS101");
    
    // Try to register for CS102 (has CS101 as prerequisite - should work)
    registerStudent(john, "CS102");
    
    // Try to register for CS201 (has CS102 as prerequisite - should work)
    registerStudent(john, "CS201");
    
    console.log("\nJohn's courses:", john.courses);
    
    console.log("\n=== Arabic Student - Ø·Ø§Ù„Ø¨ Ø¹Ø±Ø¨ÙŠ ===");
    const Ø£Ø­Ù…Ø¯ = new Student("Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", "S002");
    
    // Try CS101
    Ø³Ø¬Ù„_Ø·Ø§Ù„Ø¨(Ø£Ø­Ù…Ø¯, "CS101");
    
    // Try CS201 without CS102 (should fail)
    Ø³Ø¬Ù„_Ø·Ø§Ù„Ø¨(Ø£Ø­Ù…Ø¯, "CS201");
    
    // Register for CS102
    Ø³Ø¬Ù„_Ø·Ø§Ù„Ø¨(Ø£Ø­Ù…Ø¯, "CS102");
    
    // Now try CS201 again (should work)
    Ø³Ø¬Ù„_Ø·Ø§Ù„Ø¨(Ø£Ø­Ù…Ø¯, "CS201");
    
    console.log("\nØ£Ø­Ù…Ø¯'s courses:", Ø£Ø­Ù…Ø¯.courses);
    
    console.log("\n=== Mixed Usage - Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø®ØªÙ„Ø· ===");
    const sara = new Student("Sara Ahmed", "S003");
    
    // Mix English and Arabic function calls
    registerStudent(sara, "CS101");
    Ø³Ø¬Ù„_Ø·Ø§Ù„Ø¨(sara, "CS102");
    registerStudent(sara, "CS201");
    
    console.log("\nSara's courses:", sara.courses);
}

console.log("\nğŸ‰ Bilingual Hybrid Programming Demo Complete!");
console.log("This is the power of Bayan - no other language can do this!");

