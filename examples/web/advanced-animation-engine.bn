// ğŸ¨ Advanced Animation Engine - Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
// Built with Bayan - Ù…Ø¨Ù†ÙŠ Ø¨Ù„ØºØ© Ø§Ù„Ø¨ÙŠØ§Ù†
// Inspired by Python's Advanced Shape Engine but better for web!
// Ù…Ø³ØªÙˆØ­Ù‰ Ù…Ù† Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙÙŠ Python Ù„ÙƒÙ† Ø£ÙØ¶Ù„ Ù„Ù„ÙˆÙŠØ¨!

// ============================================
// English Version - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
// ============================================

// Shape Base Class
class Shape {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.rotation = 0;
        this.scale = 1;
        this.opacity = 1;
        this.color = '#000000';
        this.lineWidth = 2;
        this.fill = false;
        this.animations = [];
        this.time = 0;
    }
    
    // Add keyframe animation
    animate(property, keyframes) {
        this.animations.push({
            property: property,
            keyframes: keyframes.sort((a, b) => a.time - b.time)
        });
        return this;
    }
    
    // Update animations
    updateAnimation(deltaTime) {
        this.time += deltaTime;
        
        for (let anim of this.animations) {
            const value = this.interpolate(anim.keyframes, this.time);
            this[anim.property] = value;
        }
    }
    
    // Linear interpolation between keyframes
    interpolate(keyframes, time) {
        if (keyframes.length === 0) return 0;
        
        // Before first keyframe
        if (time <= keyframes[0].time) {
            return keyframes[0].value;
        }
        
        // After last keyframe
        if (time >= keyframes[keyframes.length - 1].time) {
            return keyframes[keyframes.length - 1].value;
        }
        
        // Find segment
        for (let i = 0; i < keyframes.length - 1; i++) {
            const kf1 = keyframes[i];
            const kf2 = keyframes[i + 1];
            
            if (time >= kf1.time && time <= kf2.time) {
                const t = (time - kf1.time) / (kf2.time - kf1.time);
                return kf1.value + (kf2.value - kf1.value) * t;
            }
        }
        
        return keyframes[keyframes.length - 1].value;
    }
    
    // Apply transformations
    applyTransform(ctx) {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rotation);
        ctx.scale(this.scale, this.scale);
        ctx.globalAlpha = this.opacity;
    }
    
    restoreTransform(ctx) {
        ctx.restore();
    }
    
    // Override in subclasses
    draw(ctx) {
        // To be implemented by subclasses
    }
}

// Circle Shape
class Circle extends Shape {
    constructor(x, y, radius) {
        super(x, y);
        this.radius = radius;
    }
    
    draw(ctx) {
        this.applyTransform(ctx);
        
        ctx.beginPath();
        ctx.arc(0, 0, this.radius, 0, Math.PI * 2);
        
        if (this.fill) {
            ctx.fillStyle = this.color;
            ctx.fill();
        }
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        this.restoreTransform(ctx);
    }
}

// Rectangle Shape
class Rectangle extends Shape {
    constructor(x, y, width, height) {
        super(x, y);
        this.width = width;
        this.height = height;
    }
    
    draw(ctx) {
        this.applyTransform(ctx);
        
        ctx.beginPath();
        ctx.rect(-this.width / 2, -this.height / 2, this.width, this.height);
        
        if (this.fill) {
            ctx.fillStyle = this.color;
            ctx.fill();
        }
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        this.restoreTransform(ctx);
    }
}

// Line Shape
class Line extends Shape {
    constructor(x1, y1, x2, y2) {
        super(x1, y1);
        this.x2 = x2;
        this.y2 = y2;
    }
    
    draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.opacity;
        
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(this.x2, this.y2);
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        ctx.restore();
    }
}

// Bezier Curve Shape
class BezierCurve extends Shape {
    constructor(x1, y1, cp1x, cp1y, cp2x, cp2y, x2, y2) {
        super(x1, y1);
        this.cp1x = cp1x;
        this.cp1y = cp1y;
        this.cp2x = cp2x;
        this.cp2y = cp2y;
        this.x2 = x2;
        this.y2 = y2;
    }
    
    draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.opacity;
        
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x2, this.y2);
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        ctx.restore();
    }
}

// Polygon Shape
class Polygon extends Shape {
    constructor(points) {
        const centerX = points.reduce((sum, p) => sum + p.x, 0) / points.length;
        const centerY = points.reduce((sum, p) => sum + p.y, 0) / points.length;
        super(centerX, centerY);
        this.points = points;
    }
    
    draw(ctx) {
        this.applyTransform(ctx);
        
        ctx.beginPath();
        const firstPoint = this.points[0];
        ctx.moveTo(firstPoint.x - this.x, firstPoint.y - this.y);
        
        for (let i = 1; i < this.points.length; i++) {
            const point = this.points[i];
            ctx.lineTo(point.x - this.x, point.y - this.y);
        }
        
        ctx.closePath();
        
        if (this.fill) {
            ctx.fillStyle = this.color;
            ctx.fill();
        }
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        this.restoreTransform(ctx);
    }
}

// Sine Wave Shape
class SineWave extends Shape {
    constructor(x, y, amplitude, frequency, phase, length) {
        super(x, y);
        this.amplitude = amplitude;
        this.frequency = frequency;
        this.phase = phase;
        this.length = length;
        this.segments = 100;
    }
    
    draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.opacity;
        
        ctx.beginPath();
        
        for (let i = 0; i <= this.segments; i++) {
            const t = (i / this.segments) * this.length;
            const x = this.x + t;
            const y = this.y + this.amplitude * Math.sin(this.frequency * t + this.phase);
            
            if (i === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        }
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        ctx.restore();
    }
}

// Star Shape
class Star extends Shape {
    constructor(x, y, outerRadius, innerRadius, points) {
        super(x, y);
        this.outerRadius = outerRadius;
        this.innerRadius = innerRadius;
        this.points = points;
    }
    
    draw(ctx) {
        this.applyTransform(ctx);
        
        ctx.beginPath();
        
        for (let i = 0; i < this.points * 2; i++) {
            const radius = i % 2 === 0 ? this.outerRadius : this.innerRadius;
            const angle = (Math.PI / this.points) * i;
            const x = radius * Math.cos(angle - Math.PI / 2);
            const y = radius * Math.sin(angle - Math.PI / 2);
            
            if (i === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        }
        
        ctx.closePath();
        
        if (this.fill) {
            ctx.fillStyle = this.color;
            ctx.fill();
        }
        
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.lineWidth;
        ctx.stroke();
        
        this.restoreTransform(ctx);
    }
}

// Animation Engine
class AnimationEngine {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.shapes = [];
        this.isPlaying = false;
        this.lastTime = 0;
        this.backgroundColor = '#ffffff';
        
        this.resize();
        window.addEventListener('resize', () => this.resize());
    }
    
    resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
    }
    
    addShape(shape) {
        this.shapes.push(shape);
        return this;
    }
    
    clear() {
        this.shapes = [];
        return this;
    }
    
    update(deltaTime) {
        for (let shape of this.shapes) {
            shape.updateAnimation(deltaTime);
        }
    }
    
    draw() {
        // Clear canvas
        this.ctx.fillStyle = this.backgroundColor;
        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
        
        // Draw all shapes
        for (let shape of this.shapes) {
            shape.draw(this.ctx);
        }
    }
    
    animate(currentTime) {
        if (!this.isPlaying) return;
        
        const deltaTime = (currentTime - this.lastTime) / 1000;
        this.lastTime = currentTime;
        
        this.update(deltaTime);
        this.draw();
        
        requestAnimationFrame((t) => this.animate(t));
    }
    
    play() {
        if (this.isPlaying) return;
        this.isPlaying = true;
        this.lastTime = performance.now();
        requestAnimationFrame((t) => this.animate(t));
        return this;
    }
    
    pause() {
        this.isPlaying = false;
        return this;
    }
    
    reset() {
        for (let shape of this.shapes) {
            shape.time = 0;
        }
        this.draw();
        return this;
    }
}

// Export for use
const engine = new AnimationEngine('animCanvas');

// ============================================
// Arabic Version - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
// ============================================

// ØµÙ†Ù Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
ØµÙ†Ù Ø´ÙƒÙ„ {
    Ù…Ù†Ø´Ø¦(Ø³, Øµ) {
        Ù‡Ø°Ø§.Ø³ = Ø³;
        Ù‡Ø°Ø§.Øµ = Øµ;
        Ù‡Ø°Ø§.Ø§Ù„Ø¯ÙˆØ±Ø§Ù† = 0;
        Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ = 1;
        Ù‡Ø°Ø§.Ø§Ù„Ø´ÙØ§ÙÙŠØ© = 1;
        Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ† = '#000000';
        Ù‡Ø°Ø§.Ø¹Ø±Ø¶_Ø§Ù„Ø®Ø· = 2;
        Ù‡Ø°Ø§.ØªØ¹Ø¨Ø¦Ø© = Ø®Ø·Ø£;
        Ù‡Ø°Ø§.Ø§Ù„Ø­Ø±ÙƒØ§Øª = [];
        Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª = 0;
    }

    Ø¯Ø§Ù„Ø© Ø­Ø±Ùƒ(Ø§Ù„Ø®Ø§ØµÙŠØ©, Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª_Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©) {
        Ù‡Ø°Ø§.Ø§Ù„Ø­Ø±ÙƒØ§Øª.push({
            Ø®Ø§ØµÙŠØ©: Ø§Ù„Ø®Ø§ØµÙŠØ©,
            Ø¥Ø·Ø§Ø±Ø§Øª: Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª_Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©.sort((Ø£, Ø¨) => Ø£.ÙˆÙ‚Øª - Ø¨.ÙˆÙ‚Øª)
        });
        Ø§Ø±Ø¬Ø¹ Ù‡Ø°Ø§;
    }

    Ø¯Ø§Ù„Ø© Ø­Ø¯Ø«_Ø§Ù„Ø­Ø±ÙƒØ©(ÙØ±Ù‚_Ø§Ù„ÙˆÙ‚Øª) {
        Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª = Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª + ÙØ±Ù‚_Ø§Ù„ÙˆÙ‚Øª;

        Ù„ÙƒÙ„ (let Ø­Ø±ÙƒØ© of Ù‡Ø°Ø§.Ø§Ù„Ø­Ø±ÙƒØ§Øª) {
            const Ù‚ÙŠÙ…Ø© = Ù‡Ø°Ø§.Ø§Ø³ØªÙƒÙ…Ù„(Ø­Ø±ÙƒØ©.Ø¥Ø·Ø§Ø±Ø§Øª, Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª);
            Ù‡Ø°Ø§[Ø­Ø±ÙƒØ©.Ø®Ø§ØµÙŠØ©] = Ù‚ÙŠÙ…Ø©;
        }
    }

    Ø¯Ø§Ù„Ø© Ø§Ø³ØªÙƒÙ…Ù„(Ø¥Ø·Ø§Ø±Ø§Øª, ÙˆÙ‚Øª) {
        Ø§Ø°Ø§ (Ø¥Ø·Ø§Ø±Ø§Øª.length === 0) Ø§Ø±Ø¬Ø¹ 0;

        Ø§Ø°Ø§ (ÙˆÙ‚Øª <= Ø¥Ø·Ø§Ø±Ø§Øª[0].ÙˆÙ‚Øª) {
            Ø§Ø±Ø¬Ø¹ Ø¥Ø·Ø§Ø±Ø§Øª[0].Ù‚ÙŠÙ…Ø©;
        }

        Ø§Ø°Ø§ (ÙˆÙ‚Øª >= Ø¥Ø·Ø§Ø±Ø§Øª[Ø¥Ø·Ø§Ø±Ø§Øª.length - 1].ÙˆÙ‚Øª) {
            Ø§Ø±Ø¬Ø¹ Ø¥Ø·Ø§Ø±Ø§Øª[Ø¥Ø·Ø§Ø±Ø§Øª.length - 1].Ù‚ÙŠÙ…Ø©;
        }

        Ù„ÙƒÙ„ (let Ù… = 0; Ù… < Ø¥Ø·Ø§Ø±Ø§Øª.length - 1; Ù…++) {
            const Ø¥1 = Ø¥Ø·Ø§Ø±Ø§Øª[Ù…];
            const Ø¥2 = Ø¥Ø·Ø§Ø±Ø§Øª[Ù… + 1];

            Ø§Ø°Ø§ (ÙˆÙ‚Øª >= Ø¥1.ÙˆÙ‚Øª && ÙˆÙ‚Øª <= Ø¥2.ÙˆÙ‚Øª) {
                const Øª = (ÙˆÙ‚Øª - Ø¥1.ÙˆÙ‚Øª) / (Ø¥2.ÙˆÙ‚Øª - Ø¥1.ÙˆÙ‚Øª);
                Ø§Ø±Ø¬Ø¹ Ø¥1.Ù‚ÙŠÙ…Ø© + (Ø¥2.Ù‚ÙŠÙ…Ø© - Ø¥1.Ù‚ÙŠÙ…Ø©) * Øª;
            }
        }

        Ø§Ø±Ø¬Ø¹ Ø¥Ø·Ø§Ø±Ø§Øª[Ø¥Ø·Ø§Ø±Ø§Øª.length - 1].Ù‚ÙŠÙ…Ø©;
    }

    Ø¯Ø§Ù„Ø© Ø§Ø±Ø³Ù…(Ø§Ù„Ø³ÙŠØ§Ù‚) {
        // ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡Ø§ ÙÙŠ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„ÙØ±Ø¹ÙŠØ©
    }
}

// ØµÙ†Ù Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©
ØµÙ†Ù Ø¯Ø§Ø¦Ø±Ø© ÙŠÙ…ØªØ¯ Ø´ÙƒÙ„ {
    Ù…Ù†Ø´Ø¦(Ø³, Øµ, Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø±) {
        super(Ø³, Øµ);
        Ù‡Ø°Ø§.Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø± = Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø±;
    }

    Ø¯Ø§Ù„Ø© Ø§Ø±Ø³Ù…(Ø§Ù„Ø³ÙŠØ§Ù‚) {
        Ø§Ù„Ø³ÙŠØ§Ù‚.save();
        Ø§Ù„Ø³ÙŠØ§Ù‚.translate(Ù‡Ø°Ø§.Ø³, Ù‡Ø°Ø§.Øµ);
        Ø§Ù„Ø³ÙŠØ§Ù‚.rotate(Ù‡Ø°Ø§.Ø§Ù„Ø¯ÙˆØ±Ø§Ù†);
        Ø§Ù„Ø³ÙŠØ§Ù‚.scale(Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³, Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³);
        Ø§Ù„Ø³ÙŠØ§Ù‚.globalAlpha = Ù‡Ø°Ø§.Ø§Ù„Ø´ÙØ§ÙÙŠØ©;

        Ø§Ù„Ø³ÙŠØ§Ù‚.beginPath();
        Ø§Ù„Ø³ÙŠØ§Ù‚.arc(0, 0, Ù‡Ø°Ø§.Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø±, 0, Math.PI * 2);

        Ø§Ø°Ø§ (Ù‡Ø°Ø§.ØªØ¹Ø¨Ø¦Ø©) {
            Ø§Ù„Ø³ÙŠØ§Ù‚.fillStyle = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ†;
            Ø§Ù„Ø³ÙŠØ§Ù‚.fill();
        }

        Ø§Ù„Ø³ÙŠØ§Ù‚.strokeStyle = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ†;
        Ø§Ù„Ø³ÙŠØ§Ù‚.lineWidth = Ù‡Ø°Ø§.Ø¹Ø±Ø¶_Ø§Ù„Ø®Ø·;
        Ø§Ù„Ø³ÙŠØ§Ù‚.stroke();

        Ø§Ù„Ø³ÙŠØ§Ù‚.restore();
    }
}

// ØµÙ†Ù Ø§Ù„Ù…Ø³ØªØ·ÙŠÙ„
ØµÙ†Ù Ù…Ø³ØªØ·ÙŠÙ„ ÙŠÙ…ØªØ¯ Ø´ÙƒÙ„ {
    Ù…Ù†Ø´Ø¦(Ø³, Øµ, Ø§Ù„Ø¹Ø±Ø¶, Ø§Ù„Ø§Ø±ØªÙØ§Ø¹) {
        super(Ø³, Øµ);
        Ù‡Ø°Ø§.Ø§Ù„Ø¹Ø±Ø¶ = Ø§Ù„Ø¹Ø±Ø¶;
        Ù‡Ø°Ø§.Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ = Ø§Ù„Ø§Ø±ØªÙØ§Ø¹;
    }

    Ø¯Ø§Ù„Ø© Ø§Ø±Ø³Ù…(Ø§Ù„Ø³ÙŠØ§Ù‚) {
        Ø§Ù„Ø³ÙŠØ§Ù‚.save();
        Ø§Ù„Ø³ÙŠØ§Ù‚.translate(Ù‡Ø°Ø§.Ø³, Ù‡Ø°Ø§.Øµ);
        Ø§Ù„Ø³ÙŠØ§Ù‚.rotate(Ù‡Ø°Ø§.Ø§Ù„Ø¯ÙˆØ±Ø§Ù†);
        Ø§Ù„Ø³ÙŠØ§Ù‚.scale(Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³, Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³);
        Ø§Ù„Ø³ÙŠØ§Ù‚.globalAlpha = Ù‡Ø°Ø§.Ø§Ù„Ø´ÙØ§ÙÙŠØ©;

        Ø§Ù„Ø³ÙŠØ§Ù‚.beginPath();
        Ø§Ù„Ø³ÙŠØ§Ù‚.rect(-Ù‡Ø°Ø§.Ø§Ù„Ø¹Ø±Ø¶ / 2, -Ù‡Ø°Ø§.Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ / 2, Ù‡Ø°Ø§.Ø§Ù„Ø¹Ø±Ø¶, Ù‡Ø°Ø§.Ø§Ù„Ø§Ø±ØªÙØ§Ø¹);

        Ø§Ø°Ø§ (Ù‡Ø°Ø§.ØªØ¹Ø¨Ø¦Ø©) {
            Ø§Ù„Ø³ÙŠØ§Ù‚.fillStyle = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ†;
            Ø§Ù„Ø³ÙŠØ§Ù‚.fill();
        }

        Ø§Ù„Ø³ÙŠØ§Ù‚.strokeStyle = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ†;
        Ø§Ù„Ø³ÙŠØ§Ù‚.lineWidth = Ù‡Ø°Ø§.Ø¹Ø±Ø¶_Ø§Ù„Ø®Ø·;
        Ø§Ù„Ø³ÙŠØ§Ù‚.stroke();

        Ø§Ù„Ø³ÙŠØ§Ù‚.restore();
    }
}

// ØµÙ†Ù Ø§Ù„Ù†Ø¬Ù…Ø©
ØµÙ†Ù Ù†Ø¬Ù…Ø© ÙŠÙ…ØªØ¯ Ø´ÙƒÙ„ {
    Ù…Ù†Ø´Ø¦(Ø³, Øµ, Ù†ØµÙ_Ù‚Ø·Ø±_Ø®Ø§Ø±Ø¬ÙŠ, Ù†ØµÙ_Ù‚Ø·Ø±_Ø¯Ø§Ø®Ù„ÙŠ, Ø¹Ø¯Ø¯_Ø§Ù„Ù†Ù‚Ø§Ø·) {
        super(Ø³, Øµ);
        Ù‡Ø°Ø§.Ù†ØµÙ_Ù‚Ø·Ø±_Ø®Ø§Ø±Ø¬ÙŠ = Ù†ØµÙ_Ù‚Ø·Ø±_Ø®Ø§Ø±Ø¬ÙŠ;
        Ù‡Ø°Ø§.Ù†ØµÙ_Ù‚Ø·Ø±_Ø¯Ø§Ø®Ù„ÙŠ = Ù†ØµÙ_Ù‚Ø·Ø±_Ø¯Ø§Ø®Ù„ÙŠ;
        Ù‡Ø°Ø§.Ø¹Ø¯Ø¯_Ø§Ù„Ù†Ù‚Ø§Ø· = Ø¹Ø¯Ø¯_Ø§Ù„Ù†Ù‚Ø§Ø·;
    }

    Ø¯Ø§Ù„Ø© Ø§Ø±Ø³Ù…(Ø§Ù„Ø³ÙŠØ§Ù‚) {
        Ø§Ù„Ø³ÙŠØ§Ù‚.save();
        Ø§Ù„Ø³ÙŠØ§Ù‚.translate(Ù‡Ø°Ø§.Ø³, Ù‡Ø°Ø§.Øµ);
        Ø§Ù„Ø³ÙŠØ§Ù‚.rotate(Ù‡Ø°Ø§.Ø§Ù„Ø¯ÙˆØ±Ø§Ù†);
        Ø§Ù„Ø³ÙŠØ§Ù‚.scale(Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³, Ù‡Ø°Ø§.Ø§Ù„Ù…Ù‚ÙŠØ§Ø³);
        Ø§Ù„Ø³ÙŠØ§Ù‚.globalAlpha = Ù‡Ø°Ø§.Ø§Ù„Ø´ÙØ§ÙÙŠØ©;

        Ø§Ù„Ø³ÙŠØ§Ù‚.beginPath();

        Ù„ÙƒÙ„ (let Ù… = 0; Ù… < Ù‡Ø°Ø§.Ø¹Ø¯Ø¯_Ø§Ù„Ù†Ù‚Ø§Ø· * 2; Ù…++) {
            const Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø± = Ù… % 2 === 0 ? Ù‡Ø°Ø§.Ù†ØµÙ_Ù‚Ø·Ø±_Ø®Ø§Ø±Ø¬ÙŠ : Ù‡Ø°Ø§.Ù†ØµÙ_Ù‚Ø·Ø±_Ø¯Ø§Ø®Ù„ÙŠ;
            const Ø§Ù„Ø²Ø§ÙˆÙŠØ© = (Math.PI / Ù‡Ø°Ø§.Ø¹Ø¯Ø¯_Ø§Ù„Ù†Ù‚Ø§Ø·) * Ù…;
            const Ø³ = Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø± * Math.cos(Ø§Ù„Ø²Ø§ÙˆÙŠØ© - Math.PI / 2);
            const Øµ = Ù†ØµÙ_Ø§Ù„Ù‚Ø·Ø± * Math.sin(Ø§Ù„Ø²Ø§ÙˆÙŠØ© - Math.PI / 2);

            Ø§Ø°Ø§ (Ù… === 0) {
                Ø§Ù„Ø³ÙŠØ§Ù‚.moveTo(Ø³, Øµ);
            } ÙˆØ§Ù„Ø§ {
                Ø§Ù„Ø³ÙŠØ§Ù‚.lineTo(Ø³, Øµ);
            }
        }

        Ø§Ù„Ø³ÙŠØ§Ù‚.closePath();

        Ø§Ø°Ø§ (Ù‡Ø°Ø§.ØªØ¹Ø¨Ø¦Ø©) {
            Ø§Ù„Ø³ÙŠØ§Ù‚.fillStyle = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ†;
            Ø§Ù„Ø³ÙŠØ§Ù‚.fill();
        }

        Ø§Ù„Ø³ÙŠØ§Ù‚.strokeStyle = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆÙ†;
        Ø§Ù„Ø³ÙŠØ§Ù‚.lineWidth = Ù‡Ø°Ø§.Ø¹Ø±Ø¶_Ø§Ù„Ø®Ø·;
        Ø§Ù„Ø³ÙŠØ§Ù‚.stroke();

        Ø§Ù„Ø³ÙŠØ§Ù‚.restore();
    }
}

// ØµÙ†Ù Ù…Ø­Ø±Ùƒ Ø§Ù„Ø­Ø±ÙƒØ©
ØµÙ†Ù Ù…Ø­Ø±Ùƒ_Ø­Ø±ÙƒØ© {
    Ù…Ù†Ø´Ø¦(Ù…Ø¹Ø±Ù_Ø§Ù„Ù„ÙˆØ­Ø©) {
        Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆØ­Ø© = document.getElementById(Ù…Ø¹Ø±Ù_Ø§Ù„Ù„ÙˆØ­Ø©);
        Ù‡Ø°Ø§.Ø§Ù„Ø³ÙŠØ§Ù‚ = Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆØ­Ø©.getContext('2d');
        Ù‡Ø°Ø§.Ø§Ù„Ø£Ø´ÙƒØ§Ù„ = [];
        Ù‡Ø°Ø§.ÙŠØ¹Ù…Ù„ = Ø®Ø·Ø£;
        Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø³Ø§Ø¨Ù‚ = 0;
        Ù‡Ø°Ø§.Ù„ÙˆÙ†_Ø§Ù„Ø®Ù„ÙÙŠØ© = '#ffffff';
    }

    Ø¯Ø§Ù„Ø© Ø£Ø¶Ù_Ø´ÙƒÙ„(Ø´ÙƒÙ„) {
        Ù‡Ø°Ø§.Ø§Ù„Ø£Ø´ÙƒØ§Ù„.push(Ø´ÙƒÙ„);
        Ø§Ø±Ø¬Ø¹ Ù‡Ø°Ø§;
    }

    Ø¯Ø§Ù„Ø© Ø§Ù…Ø³Ø­() {
        Ù‡Ø°Ø§.Ø§Ù„Ø£Ø´ÙƒØ§Ù„ = [];
        Ø§Ø±Ø¬Ø¹ Ù‡Ø°Ø§;
    }

    Ø¯Ø§Ù„Ø© Ø­Ø¯Ø«(ÙØ±Ù‚_Ø§Ù„ÙˆÙ‚Øª) {
        Ù„ÙƒÙ„ (let Ø´ÙƒÙ„ of Ù‡Ø°Ø§.Ø§Ù„Ø£Ø´ÙƒØ§Ù„) {
            Ø´ÙƒÙ„.Ø­Ø¯Ø«_Ø§Ù„Ø­Ø±ÙƒØ©(ÙØ±Ù‚_Ø§Ù„ÙˆÙ‚Øª);
        }
    }

    Ø¯Ø§Ù„Ø© Ø§Ø±Ø³Ù…() {
        Ù‡Ø°Ø§.Ø§Ù„Ø³ÙŠØ§Ù‚.fillStyle = Ù‡Ø°Ø§.Ù„ÙˆÙ†_Ø§Ù„Ø®Ù„ÙÙŠØ©;
        Ù‡Ø°Ø§.Ø§Ù„Ø³ÙŠØ§Ù‚.fillRect(0, 0, Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆØ­Ø©.width, Ù‡Ø°Ø§.Ø§Ù„Ù„ÙˆØ­Ø©.height);

        Ù„ÙƒÙ„ (let Ø´ÙƒÙ„ of Ù‡Ø°Ø§.Ø§Ù„Ø£Ø´ÙƒØ§Ù„) {
            Ø´ÙƒÙ„.Ø§Ø±Ø³Ù…(Ù‡Ø°Ø§.Ø§Ù„Ø³ÙŠØ§Ù‚);
        }
    }

    Ø¯Ø§Ù„Ø© Ø´ØºÙ„() {
        Ø§Ø°Ø§ (Ù‡Ø°Ø§.ÙŠØ¹Ù…Ù„) Ø§Ø±Ø¬Ø¹;
        Ù‡Ø°Ø§.ÙŠØ¹Ù…Ù„ = ØµØ­ÙŠØ­;
        Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø³Ø§Ø¨Ù‚ = performance.now();
        requestAnimationFrame((Ùˆ) => Ù‡Ø°Ø§.Ø­Ø±Ùƒ(Ùˆ));
        Ø§Ø±Ø¬Ø¹ Ù‡Ø°Ø§;
    }

    Ø¯Ø§Ù„Ø© Ø­Ø±Ùƒ(Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø­Ø§Ù„ÙŠ) {
        Ø§Ø°Ø§ (!Ù‡Ø°Ø§.ÙŠØ¹Ù…Ù„) Ø§Ø±Ø¬Ø¹;

        const ÙØ±Ù‚_Ø§Ù„ÙˆÙ‚Øª = (Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø­Ø§Ù„ÙŠ - Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø³Ø§Ø¨Ù‚) / 1000;
        Ù‡Ø°Ø§.Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø³Ø§Ø¨Ù‚ = Ø§Ù„ÙˆÙ‚Øª_Ø§Ù„Ø­Ø§Ù„ÙŠ;

        Ù‡Ø°Ø§.Ø­Ø¯Ø«(ÙØ±Ù‚_Ø§Ù„ÙˆÙ‚Øª);
        Ù‡Ø°Ø§.Ø§Ø±Ø³Ù…();

        requestAnimationFrame((Ùˆ) => Ù‡Ø°Ø§.Ø­Ø±Ùƒ(Ùˆ));
    }
}

