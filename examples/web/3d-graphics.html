<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎮 Bayan 3D Graphics - رسوميات البيان ثلاثية الأبعاد</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f0f1e;
            overflow: hidden;
        }
        
        #canvas3d {
            display: block;
            cursor: grab;
        }
        
        #canvas3d:active {
            cursor: grabbing;
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            padding: 20px;
            text-align: center;
            color: white;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            min-width: 400px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group:last-child {
            margin-bottom: 0;
        }
        
        .control-group label {
            display: block;
            color: #4ECDC4;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, #667eea, #764ba2);
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4ECDC4;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4ECDC4;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
            border: none;
        }
        
        .value-display {
            color: #FF6B6B;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            margin-top: 5px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .info {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 15px;
            color: white;
            backdrop-filter: blur(10px);
            max-width: 300px;
            z-index: 1000;
        }
        
        .info h3 {
            color: #4ECDC4;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .info ul {
            list-style: none;
            padding: 0;
        }
        
        .info li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }
        
        .info li:last-child {
            border-bottom: none;
        }
        
        .info .emoji {
            margin-right: 8px;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="header floating">
        <h1>🎮 Bayan 3D Graphics Engine</h1>
        <p>محرك رسوميات البيان ثلاثي الأبعاد - Pure Canvas 3D Rendering</p>
    </div>
    
    <canvas id="canvas3d"></canvas>
    
    <div class="info">
        <h3>✨ Features Used</h3>
        <ul>
            <li><span class="emoji">🎯</span> <strong>Classes & OOP</strong></li>
            <li><span class="emoji">📐</span> <strong>3D Math</strong></li>
            <li><span class="emoji">🔄</span> <strong>Rotation Matrices</strong></li>
            <li><span class="emoji">🎨</span> <strong>Painter's Algorithm</strong></li>
            <li><span class="emoji">📊</span> <strong>Projection</strong></li>
            <li><span class="emoji">🌐</span> <strong>Bilingual Code</strong></li>
        </ul>
    </div>
    
    <div class="controls">
        <div class="control-group">
            <label>⚡ Rotation Speed - سرعة الدوران</label>
            <input type="range" id="speedSlider" min="0" max="0.1" step="0.001" value="0.02">
            <div class="value-display" id="speedValue">0.02</div>
        </div>
        
        <div class="control-group">
            <label>📦 Number of Cubes - عدد المكعبات</label>
            <input type="range" id="cubeSlider" min="1" max="10" step="1" value="1">
            <div class="value-display" id="cubeValue">1</div>
        </div>
        
        <div class="button-group">
            <button onclick="resetScene()">🔄 Reset</button>
            <button onclick="randomColors()">🎨 Random Colors</button>
            <button onclick="toggleGrid()">📊 Toggle Grid</button>
        </div>
    </div>
    
    <script>
        // Compiled from Bayan code
        
        class Point3D {
            constructor(x, y, z) {
                this.x = x;
                this.y = y;
                this.z = z;
            }
            
            rotateX(angle) {
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);
                const y = this.y * cos - this.z * sin;
                const z = this.y * sin + this.z * cos;
                return new Point3D(this.x, y, z);
            }
            
            rotateY(angle) {
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);
                const x = this.x * cos + this.z * sin;
                const z = -this.x * sin + this.z * cos;
                return new Point3D(x, this.y, z);
            }
            
            rotateZ(angle) {
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);
                const x = this.x * cos - this.y * sin;
                const y = this.x * sin + this.y * cos;
                return new Point3D(x, y, this.z);
            }
            
            project(width, height, fov, distance) {
                const factor = fov / (distance + this.z);
                const x = this.x * factor + width / 2;
                const y = -this.y * factor + height / 2;
                return { x, y, z: this.z };
            }
        }
        
        class Cube3D {
            constructor(size, colors, offsetX = 0, offsetY = 0) {
                this.size = size;
                this.angleX = Math.random() * Math.PI * 2;
                this.angleY = Math.random() * Math.PI * 2;
                this.angleZ = Math.random() * Math.PI * 2;
                this.offsetX = offsetX;
                this.offsetY = offsetY;
                
                const s = size / 2;
                this.vertices = [
                    new Point3D(-s, -s, -s), new Point3D(s, -s, -s),
                    new Point3D(s, s, -s), new Point3D(-s, s, -s),
                    new Point3D(-s, -s, s), new Point3D(s, -s, s),
                    new Point3D(s, s, s), new Point3D(-s, s, s)
                ];
                
                this.faces = [
                    [0, 1, 2, 3], [4, 5, 6, 7], [0, 1, 5, 4],
                    [2, 3, 7, 6], [0, 3, 7, 4], [1, 2, 6, 5]
                ];
                
                this.faceColors = colors || [
                    '#FF6B6B', '#4ECDC4', '#45B7D1',
                    '#FFA07A', '#98D8C8', '#F7DC6F'
                ];
            }
            
            update(speed) {
                this.angleX += speed;
                this.angleY += speed * 0.7;
                this.angleZ += speed * 0.5;
            }
            
            draw(ctx, width, height) {
                const projected = this.vertices.map(v => {
                    let rotated = v.rotateX(this.angleX);
                    rotated = rotated.rotateY(this.angleY);
                    rotated = rotated.rotateZ(this.angleZ);
                    
                    const offsetV = new Point3D(
                        rotated.x + this.offsetX,
                        rotated.y + this.offsetY,
                        rotated.z
                    );
                    return offsetV.project(width, height, 400, 4);
                });
                
                const facesWithDepth = this.faces.map((face, i) => {
                    const avgZ = face.reduce((sum, idx) => sum + projected[idx].z, 0) / face.length;
                    return { face, color: this.faceColors[i], depth: avgZ };
                });
                
                facesWithDepth.sort((a, b) => a.depth - b.depth);
                
                for (let { face, color } of facesWithDepth) {
                    ctx.beginPath();
                    ctx.moveTo(projected[face[0]].x, projected[face[0]].y);
                    for (let i = 1; i < face.length; i++) {
                        ctx.lineTo(projected[face[i]].x, projected[face[i]].y);
                    }
                    ctx.closePath();
                    
                    ctx.fillStyle = color;
                    ctx.fill();
                    ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        }
        
        class Scene3D {
            constructor(canvasId) {
                this.canvas = document.getElementById(canvasId);
                this.ctx = this.canvas.getContext('2d');
                this.objects = [];
                this.rotationSpeed = 0.02;
                this.showGrid = true;
                
                this.resize();
                window.addEventListener('resize', () => this.resize());
                this.animate();
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            addObject(obj) {
                this.objects.push(obj);
            }
            
            clearObjects() {
                this.objects = [];
            }
            
            update() {
                for (let obj of this.objects) {
                    obj.update(this.rotationSpeed);
                }
            }
            
            draw() {
                this.ctx.fillStyle = '#1a1a2e';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                if (this.showGrid) this.drawGrid();
                
                for (let obj of this.objects) {
                    obj.draw(this.ctx, this.canvas.width, this.canvas.height);
                }
            }
            
            drawGrid() {
                this.ctx.strokeStyle = 'rgba(78, 205, 196, 0.1)';
                this.ctx.lineWidth = 1;
                const step = 50;
                
                for (let x = 0; x < this.canvas.width; x += step) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, this.canvas.height);
                    this.ctx.stroke();
                }
                
                for (let y = 0; y < this.canvas.height; y += step) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(this.canvas.width, y);
                    this.ctx.stroke();
                }
            }
            
            animate() {
                this.update();
                this.draw();
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // Initialize
        const scene = new Scene3D('canvas3d');
        scene.addObject(new Cube3D(150));
        
        // Controls
        document.getElementById('speedSlider').addEventListener('input', (e) => {
            scene.rotationSpeed = parseFloat(e.target.value);
            document.getElementById('speedValue').textContent = e.target.value;
        });
        
        document.getElementById('cubeSlider').addEventListener('input', (e) => {
            const count = parseInt(e.target.value);
            document.getElementById('cubeValue').textContent = count;
            
            scene.clearObjects();
            const spacing = 200;
            const cols = Math.ceil(Math.sqrt(count));
            
            for (let i = 0; i < count; i++) {
                const row = Math.floor(i / cols);
                const col = i % cols;
                const offsetX = (col - cols / 2) * spacing;
                const offsetY = (row - Math.ceil(count / cols) / 2) * spacing;
                scene.addObject(new Cube3D(100, null, offsetX, offsetY));
            }
        });
        
        function resetScene() {
            scene.clearObjects();
            scene.addObject(new Cube3D(150));
            document.getElementById('cubeSlider').value = 1;
            document.getElementById('cubeValue').textContent = 1;
        }
        
        function randomColors() {
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2'];
            scene.objects.forEach(obj => {
                obj.faceColors = Array(6).fill(0).map(() => colors[Math.floor(Math.random() * colors.length)]);
            });
        }
        
        function toggleGrid() {
            scene.showGrid = !scene.showGrid;
        }
    </script>
</body>
</html>

